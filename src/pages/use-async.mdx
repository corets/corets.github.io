---
name: Use Async
route: /use-async
repository: use-async
---

# Use Async

A convenient hook to deal with async operations inside React components.

```bash
yarn add @corets/use-async
```

## `useAsync`

Function `useAsync` takes any other function that returns anything that can be *awaited* and returns its result as soon as the promise resolves. You also get some useful things like a `loading` indicator, the possible `error` that might have been thrown / or occurred through rejection, a `reload` function to rerun the async procedure and a `refresh` function that can be used to trigger a *silent* reload (without changing loading status and not disposing previous result until a new one has been loaded). Async action can also be canceled with `cancel` or resolved directly using `resolve`.

```tsx
import React from "react"
import { useAsync } from "@corets/use-async"

const fetchCommodityPrice = (commodity: string) =>
  new Promise<string>((resolve) =>
    setTimeout(
      () => resolve(`${commodity}: 1000$`),
      3000
    ))

const Example = () => {
  const handle = useAsync(() => fetchCommodityPrice("gold"), [])

  if (handle.loading) {
    return <span>Loading...</span>
  }

  if (handle.error) {
    return <span>There was an error :(</span>
  }

  const handleReload = () => handle.reload()
  const handleRefresh = () => handle.refresh()
  const handleReloadWithOverride = () => handle.reload(() => fetchCommodityPrice("silver"))
  const handleRefreshWithOverride = () => handle.refresh(() => fetchCommodityPrice("silver"))
  const handleResolve = () => handle.resolve("Platinum: 99999$")
  const handleCancel = () => handle.cancel()

  return (
    <div>
      <span>{handle.result}</span>
      <button onClick={handleReload}>reload</button>
      <button onClick={handleRefresh}>reload silently</button>
      <button onClick={handleReloadWithOverride}>override reload</button>
      <button onClick={handleRefreshWithOverride}>override and reload silently</button>
      <button onClick={handleResolve}>resolve immediately</button>
      <button onClick={handleCancel}>cancel</button>
    </div>
  )
}
```
